<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
    <title>Azure IoT Hub 시작하기 -2 · CLOUDMATE Tech</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <link rel="stylesheet" href="/style.main.min.554810d3e908ec5f69f30304b1c888bab3fa7b13a34e38d3192cff1067df5bbb.css" />

    
    <link rel="stylesheet" href="/style.custom.min.d9d689b1fc51f8a08e7fb46f13628d42b1839a573d9e635ba77aec6b5a00a064.css" />

</head>
<body class=" post-template ">

    <div class="site-wrapper">

<header class="site-header"><div class="outer site-nav-main">
    <div class="inner"><nav class="site-nav">
    <div class="site-nav-left">
        
            <a class="site-nav-logo" href="">CLOUDMATE Tech</a>
        
        
        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem"><a href="https://cloudmt.co.kr">cloudmt.co.kr</a></li>
                
            </ul>
        </div>
        
    </div>
</nav>

</div>
</div></header>

<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post  no-image ">

            <header class="post-full-header">

                

                <h1 class="post-full-title">Azure IoT Hub 시작하기 -2</h1>

                

                <div class="post-full-byline">
                    <section class="post-full-byline-content">

                        

                        <section class="post-full-byline-meta">
                            
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2020-127-07">31 July 2020</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 2 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            

            <section class="post-full-content">
                <div class="post-content">
                    <p>Stream Analytics job은 여러 원본으로부터 스트리밍 데이터를 동시에 분석 및 처리하도록 설계된 이벤트 처리 엔진입니다.
Azure IoT Hub, Azure Event Hubs, Azure Blob Storage에서 원본 데이터를 수집할 수 있습니다.
이번 포스팅에서는 IoT Hub에서 Azure Stream Analytics job으로 데이터를 전송하고, 결과를 Blob 스토리지에 저장하는 방법을 소개합니다.</p>
<p><img src="images/1.png" alt="Stream Analytics job"></p>
<p>목차는 다음과 같습니다.</p>
<ul>
<li>Azure Stream Analytics job 생성</li>
<li>Blob Storage 생성</li>
<li>입력 및 출력 설정</li>
<li>쿼리 수정</li>
<li>작동 테스트</li>
</ul>
<h2 id="1-azure-stream-analytics-job-생성">1. Azure Stream Analytics job 생성</h2>
<ol>
<li>
<p>Azure Portal에서 스트림 분석 작업을 검색하여 선택합니다.</p>
</li>
<li>
<p>작업 이름과 구독, 리소스 그룹, 위치 등을 지정하고, 호스팅 환경은 클라우드로 선택합니다.</p>
</li>
</ol>
<p><img src="images/2.png" alt="Stream Analytics job"></p>
<h2 id="2-blob-storage-생성">2. Blob Storage 생성</h2>
<p>작업 결과를 저장할 Blob Storage를 생성합니다.</p>
<ol>
<li>
<p>스토리지 계정을 추가합니다.</p>
</li>
<li>
<p>생성된 스토리지 계정에서 Blob Service &gt; 컨테이너를 클릭합니다.</p>
</li>
<li>
<p>공용 액세스 수준을 Blob으로 지정하여 컨테이너를 생성합니다.</p>
</li>
</ol>
<h2 id="3-입력-및-출력-설정">3. 입력 및 출력 설정</h2>
<ol>
<li>
<p>스트림 분석 작업 메뉴에서 <strong>입력</strong>을 선택하고, <strong>+스트림 입력 추가</strong>를 클릭하여 <strong>IoT Hub</strong>를 선택합니다.</p>
</li>
<li>
<p>입력 별칭을 <strong>INPUT</strong>으로 입력하고, 미리 생성해둔 IoT Hub와 연결합니다.</p>
</li>
</ol>
<p><img src="images/3.png" alt=""></p>
<ol start="3">
<li>
<p>스트림 분석 작업 메뉴에서 <strong>출력</strong>을 선택하고, <strong>+추가</strong>를 클릭하여 <strong>Blob Storage</strong>를 선택합니다.</p>
</li>
<li>
<p>출력 별칭으로 <strong>OUTPUT</strong>을 입력하고, 앞서 생성한 스토리지 계정과 컨테이너를 선택합니다.</p>
</li>
</ol>
<p><img src="images/4.png" alt=""></p>
<blockquote>
<p>참고 : 출력 대상으로 설정할 수 있는 목록은 다음과 같습니다.</p>
</blockquote>
<p><img src="images/5.png" alt=""></p>
<h2 id="4-쿼리-수정">4. 쿼리 수정</h2>
<ol>
<li>스트림 분석 작업 메뉴에서 <strong>쿼리</strong>를 선택하고, 쿼리문을 수정합니다. <em>출력 별칭과 입력 별칭을 각각 INTO와 FROM 아래 입력합니다.</em></li>
</ol>
<p><img src="images/6.png" alt=""></p>
<ol start="2">
<li>
<p>스트림 분석 작업을 시작합니다.</p>
</li>
<li>
<p>결과를 확인합니다. 결과는 인코딩 형식으로 지정한 JSON 파일로 저장됩니다.</p>
</li>
</ol>
<p><img src="images/7.png" alt=""></p>
<p>스트림 분석 작업을 만드는 간단한 방법을 알아보았습니다. 출력으로 Power BI나 Service Bus 큐 등을 지정하면 데이터를 시각화하거나 특정 메시지에 대한 일괄 알람을 적용하는 작업을 할 수 있습니다. 또한, 여러 이벤트를 시간 순서대로 수행하도록 만들 수 있습니다.</p>
<p>다음 포스팅에서는 IoT Hub에서 서비스 버스로 라우팅을 설정하고, 로직 앱을 이용해 메일 알람을 설정하는 방법을 알아보겠습니다.</p>

                </div>
            </section>

        </article>

    </div>
</main>
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed"><article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/2020/07/31/azure-iot-hub-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-3/">
    
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">Azure IoT Hub 시작하기 -3</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>IoT Hub에서 서비스 버스로 라우팅을 설정하고, Logic Apps를 이용해 메일 알람을 설정하는 방법을 알아보겠습니다. 장비의 이상 탐지를 위해 IoT Hub에서 특정 값이</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip"></div>
                            <a href="#" class="static-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span></span>
                        <span class="post-card-byline-date"><time datetime="2020-127-07">31 July 2020</time>
                            <span class="bull">&bull;</span> 3 min read</span>
                    </div>
                </footer>
    
        </div>

</article>

            <article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/2020/08/07/nambu_womanup_mentoring/">
    
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">남부여성발전센터 멘토링데이 강연 후기</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>강연 제의 얼마 전, 좋은 기회가 생겨 남부여성발전센터 에서 주최하는 멘토링데이의 멘토로 학생들 앞에서 짧은 강연을 하였습니다. 강연이라 하기에도 부끄러운 짧은 1</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip"></div>
                            <a href="#" class="static-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span></span>
                        <span class="post-card-byline-date"><time datetime="2020-128-08">7 August 2020</time>
                            <span class="bull">&bull;</span> 7 min read</span>
                    </div>
                </footer>
    
        </div>

</article>
        </div>
    </div>
</aside>


        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="">CLOUDMATE Tech</a> &copy; 2020</section>
                <nav class="site-footer-nav">
                    <a href="">Latest Posts</a>
                    <a href="https://fb.me/cloudmatekr" target="_blank" rel="noopener">Facebook</a>
                    
                    <a href="https://github.com/mate365" target="_blank" rel="noopener">Github</a>
                    <a href="https://jonathanjanssens.com" target="_blank" rel="noopener" style="opacity: 0.5;">Hugo Casper3 by Jonathan Janssens</a>
                </nav>
            </div>
        </footer>

    </div>

</body>
</html>