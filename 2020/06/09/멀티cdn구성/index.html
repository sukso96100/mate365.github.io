<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
    <title>Azure CDN과 AWS CloudFront를 이용한 Multi CDN 구성 방법 · CLOUDMATE Tech</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <link rel="stylesheet" href="/style.main.min.9d230ec369c8d3684ed255cc9ec757b773e29a42722b21acce3bf658066bd2fc.css" />

    
    <link rel="stylesheet" href="/style.custom.min.1a1ac5f9352ddc8a966bca11adad9d9d1ec303128539f67fca1df56329b21436.css" />

</head>
<body class=" post-template ">

    <div class="site-wrapper">

<header class="site-header"><div class="outer site-nav-main">
    <div class="inner"><nav class="site-nav">
    <div class="site-nav-left">
        
            <a class="site-nav-logo" href="/">CLOUDMATE Tech</a>
        
        
        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem"><a href="https://cloudmt.co.kr">cloudmt.co.kr</a></li>
                
            </ul>
        </div>
        
    </div>
</nav></div>
</div></header>

<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post  no-image ">

            <header class="post-full-header">

                
                    
                    <section class="post-full-tags">
                        <a href="/categories/post">Post</a>
                    </section>
                

                <h1 class="post-full-title">Azure CDN과 AWS CloudFront를 이용한 Multi CDN 구성 방법</h1>

                

                <div class="post-full-byline">
                    <section class="post-full-byline-content">

                        <ul class="author-list">
  <li class="author-list-item">
        <div class="author-card">
            <div class="author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></div>
            <div class="author-info">
                <div class="author-info">
                    <h2>박찬성</h2>
                </div>
            </div>
        </div>
        <a href="/authors/chansung-park/" class="author-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
    </li>
  

</ul>

                        <section class="post-full-byline-meta">
                            
                                
                                <h4 class="author-name">박찬성</h4>
                                
                            
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2020-126-06">2020. 06. 09.</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 4 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            

            <section class="post-full-content">
                <div class="post-content">
                    <h1 id="azure-cdn과-aws-cloudfront를-이용한-multi-cdn-구성-방법">Azure CDN과 AWS CloudFront를 이용한 Multi CDN 구성 방법</h1>
<p>이번 지면에서는 서로 다른 Public Cloud를 이용하여 Multiple CDN(Content Delivery Network) 서비스를 구성하는 방법을 다뤄보겠습니다.</p>
<p>Multiple CDN 구성으로 취할 수 있는 강점으로는 Public cloud 공급사(社) 혹은 Region 단위의 대형 장애 등 크리티컬한 이벤트에 대응이 용이하여 어떤 상황에서도 무중단 CDN서비스를 공급 할 수 있습니다. 이외에도 다양한 이점을 취할 수 있으니, 안정적인 CDN서비스를 목표로 한다면 Multiple CDN은 서비스 구성에 지향점이 될 수 있을 것입니다.</p>
<ul>
<li>
<p>구성 목표</p>
<p><img src="images/Architecture.png" alt="screensh"></p>
</li>
</ul>
<pre><code>모든 구성은 기본 구성으로, 실제 사용 시 용도에 따라 상세 설정에 대한 고민이 필요한 점 참고하시며 따라가 주시면 되겠습니다.
</code></pre><pre><code>Origin과 서비스 도메인(ex; example.example.com) 등 CDN 이외 리소스는 생성이 되어 있다는 전제 하에 진행 됨을 참고 바랍니다.
</code></pre><hr>
<h2 id="1-azure-cdn-구성">1. Azure CDN 구성</h2>
<ul>
<li>
<p>CDN 프로필과 엔드포인트 생성</p>
<p><img src="images/Azurecdn.png" alt="screensh"></p>
<ul>
<li>구성에 필요한 설정을 진행하여 CDN 프로필과 엔드포인트를 생성해 줍니다.</li>
<li>이때, 생성된 &lsquo;CDN 엔드포인트 이름&rsquo;(ex; Azure.azureedge.net)은 이후 Traffic Manager 구성 시 사용 되니 별도로 메모 등을 해 두도록 합니다.
<blockquote>
<p><strong><em>참 쉽죠?</em></strong></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>사용자 지정 도메인 구성</p>
<p><img src="images/customdomain.png" alt="screensh"></p>
<ul>
<li>서비스 도메인(example.example.com) 등록을 위해 위에서 생성된 엔드포인트에 사용자 지정 도메인을 설정해 줍니다.</li>
<li>이때, 두 가지 방법을 고려할 수 있으며 아래와 같습니다.
<ol>
<li>서비스 도메인이 위에서 생성된 Azure CDN 엔드포인트를 가리키도록 CNAME 레코드를 만들 수 있습니다.</li>
<li>프로덕션 중인 서비스 도메인의 경우, 무중단 서비스를 위하여 &lsquo;cdnverify&rsquo;을 이용한 임시 CNAME매핑을 만들어 사용할 수도 있습니다.</li>
</ol>
<ul>
<li><a href="https://docs.microsoft.com/ko-kr/azure/cdn/cdn-map-content-to-custom-domain">참조 링크</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-aws-cloudfront-구성">2. AWS CloudFront 구성</h2>
<ul>
<li>
<p>CF Distribution 생성</p>
<p><img src="images/distnew1.png" alt="screensh"></p>
<ul>
<li>위 예시와 같이 원하는 서비스에 맞게 AWS CloudFront에서 신규 Distribution을 생성합니다.</li>
<li>이때, 생성된 Distribution의 &lsquo;도메인 이름&rsquo;(ex; aws.cloudfront.net)은 이후 Traffic Manager 구성 시 사용 되니 별도로 메모 등을 해 두도록 합니다.</li>
</ul>
</li>
<li>
<p>Alternate Domain Names 구성</p>
<p><img src="images/distnew2.png" alt="screensh"></p>
<ul>
<li>AWS CloudFront의 경우 신규 Distribution 생성 시 사용자가 지정한 서비스 도메인(example.example.com)을 설정할 수 있습니다. 물론, 생성 이후 수정을 통해 구성도 가능합니다.</li>
<li>서비스 도메인 등록시 Azure CDN과의 차이점이라면, 해당 서비스 도메인에 대하여 customize 된 인증서를 사용하거나 혹은 AWS에서 제공하는 ACM을 통해 인증 하여 사용할 수 있습니다.</li>
</ul>
</li>
</ul>
<h2 id="3-azure-traffic-manager-구성">3. Azure Traffic Manager 구성</h2>
<ul>
<li>
<p>Traffic Manager 프로필 생성</p>
<p><img src="images/tmmake.png" alt="screensh"></p>
<ul>
<li>Traffic Manager 프로필을 생성합니다.</li>
<li>라우팅 방법은 현재 &lsquo;성능&rsquo;, &lsquo;가중&rsquo;, &lsquo;우선 순위&rsquo;, &lsquo;지리적&rsquo;, &lsquo;다중값&rsquo;, &lsquo;서브넷&rsquo; 이렇게 6가지 중 하나를 선택할 수 있으니 용도에 따라 설정해 줍니다.</li>
<li>각 라우팅에 대한 자세한 설명 및 설정방법에 대해서는 아래 링크를 참조하시기 바랍니다.
<ul>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/traffic-manager-configure-performance-routing-method">성능 기반 라우팅</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/tutorial-traffic-manager-weighted-endpoint-routing">가중치 라우팅</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/traffic-manager-configure-priority-routing-method">우선 순위 라우팅</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/traffic-manager-configure-geographic-routing-method">지리 기반 라우팅</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/traffic-manager-configure-multivalue-routing-method">다중값 라우팅</a></li>
<li><a href="https://docs.microsoft.com/ko-kr/azure/traffic-manager/traffic-manager-configure-subnet-routing-method">서브넷 기반 라우팅</a></li>
</ul>
</li>
<li>생성된 Traffic Manager 프로필의 엔드포인트(Azure.trafficmanager.net)는 이후 실제 사용하게 될 서비스 도메인(example.example.com)에 CNAME 등록이 필요하므로 잘 기억해 둡니다.</li>
</ul>
</li>
<li>
<p>Traffic Manager 엔드포인트 추가
<img src="images/tmendmake.png" alt="screensh"></p>
<ul>
<li>앞에서 생성시킨 Traffic Manager에 Azure CDN과 AWS CloudFront에 각각의 엔드포인트를 추가합니다.</li>
<li>이때, 라우팅 방법에 따른 세부 설정도 추가로 진행해 줍니다.</li>
</ul>
</li>
</ul>
<pre><code>위 과정을 모두 마쳤다면, 실사용 할 서비스 도메인(example.example.com)에 바로 앞 단계에서 생성한 Traffic Manager의 엔드포인트(Azure.trafficmanager.net)를 CNAME 등록해 주는 것으로 Multiple CDN을 사용하기 위한 준비가 완료 됩니다.
</code></pre><p>CDN 서비스 구성에 도움이 되셨길 바랍니다.</p>
<h3 id="_things-are-always-at-their-best-in-the-beginning_"><em>Things are always at their best in the beginning.</em></h3>

                </div>
            </section>

        </article>

    </div>
</main>
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

    <article class="read-next-card">
        <header class="read-next-card-header">
            <h3><span>More in</span> <a href="/categories/post">Post</a></h3>
        </header>
        <div class="read-next-card-content">
            <ul>
                
                <li>
                    <h4><a href="/2021/02/17/spot_by_netapp_%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/">Spot By NetApp 시작하기</a></h4>
                    <div class="read-next-card-meta">
                            <p><time datetime="2021-122-02">2021. 02. 17.</time> 
                                
                            </p>
                    </div>
                </li>
                
                <li>
                    <h4><a href="/2021/02/16/devtest-%ED%86%B5%ED%95%9C-devops-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0/">DevTest 통한 DevOps 구성하기</a></h4>
                    <div class="read-next-card-meta">
                            <p><time datetime="2021-122-02">2021. 02. 16.</time> 
                                
                            </p>
                    </div>
                </li>
                
                <li>
                    <h4><a href="/2021/02/16/%EC%A0%81%EC%A0%88%ED%95%9Cazure%EC%9A%B4%EC%98%81%EC%9C%BC%EB%A1%9C%EB%B9%84%EC%9A%A9%EC%9D%84%EC%B5%9C%EC%A0%81%ED%99%94%ED%95%98%EC%8B%9C%EB%A9%B4%EB%90%A9%EB%8B%88%EB%8B%A4/">적절한 Azure 운영으로 비용을 최적화하시면 됩니다.</a></h4>
                    <div class="read-next-card-meta">
                            <p><time datetime="2021-122-02">2021. 02. 16.</time> 
                                
                            </p>
                    </div>
                </li>
                
            </ul>
        </div>
    </article>
<article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/2020/06/01/vsonlinereview2/">
    
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">Post</div>
                    

                    <h2 class="post-card-title">Visual Studio Online 리뷰2 - 협업(Live Share)</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>Visual Studio Codespace 협업기능 사용방법 1. Azure Account 설치 2. Live Share Extension 설치 Live Share Extension Pack Live Share Whiteboard 설치 후 Reload 3. Start (세션 시작) 협업 세션 시작을 통해 시작할 수 있으며, 세션 만들어지고 url공유</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip"></div>
                            <a href="#" class="static-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span></span>
                        
                            
                        
                        <span class="post-card-byline-date"><time datetime="2020-126-06">2020. 06. 01.</time>
                            <span class="bull">&bull;</span> 2 min read</span>
                    </div>
                </footer>
    
        </div>

</article>

            <article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/2020/06/16/website_monitoring_with_logicapp/">
    
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">Post</div>
                    

                    <h2 class="post-card-title">Logic App을 이용하여 Website 모니터링 하기</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>주저리주저리 웹사이트가 죽었다. 모니터링을 별도로 할 만큼 중요한 서비스는 아니었지만, 이대로 두다간 우리가 멍청이가 될 것 같아 모니터링을 설정하기로 했다. 우</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip"></div>
                            <a href="#" class="static-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span></span>
                        
                            
                        
                        <span class="post-card-byline-date"><time datetime="2020-126-06">2020. 06. 16.</time>
                            <span class="bull">&bull;</span> 6 min read</span>
                    </div>
                </footer>
    
        </div>

</article>
        </div>
    </div>
</aside>


        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">CLOUDMATE Tech</a> &copy; 2020</section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://fb.me/cloudmatekr" target="_blank" rel="noopener">Facebook</a>
                    
                    <a href="https://github.com/mate365" target="_blank" rel="noopener">Github</a>
                    <a href="https://jonathanjanssens.com" target="_blank" rel="noopener" style="opacity: 0.5;">Hugo Casper3 by Jonathan Janssens</a>
                </nav>
            </div>
        </footer>

    </div>

</body>
</html>